overlay: 1.0.0
info:
  title: Speakeasy overlay for epilot role API
  version: 0.0.1

actions:
  - target: $
    update:
      x-speakeasy-retries:
        strategy: backoff
        backoff:
          initialInterval: 5000 # 5 seconds
          maxInterval: 60000 # 60 seconds
          maxElapsedTime: 3600000 # 5 minutes
          exponent: 1.5
        statusCodes:
          - 5XX
        retryConnectionErrors: true

  # Role
  # - target: $["paths"]["/v1/dashboard/dashboards"]["post"]
  #   update:
  #     x-speakeasy-entity-operation: Dashboard#create
  - target: $["paths"]["/v1/permissions/roles/{roleId}"]["get"]
    update:
      x-speakeasy-entity-operation: Role#get

  - target: $["paths"]["/v1/permissions/roles/{roleId}"]["put"]
    update:
      x-speakeasy-entity-operation: Role#create,update

  - target: $["paths"]["/v1/permissions/roles/{roleId}"]["delete"]
    update:
      x-speakeasy-entity-operation: Role#delete

  - target: $["components"]["schemas"]["Role"]
    update:
      x-speakeasy-entity: Role

  - target: $["paths"]["/v1/permissions/roles/{roleId}"]["get"]["parameters"][0]
    update:
      x-speakeasy-match: id

  - target: $["paths"]["/v1/permissions/roles/{roleId}"]["put"]["parameters"][0]
    update:
      x-speakeasy-match: id
  - target: $["paths"]["/v1/permissions/roles/{roleId}"]["delete"]["parameters"][0]
    update:
      x-speakeasy-match: id


  # # overrides
  # - target: $["components"]["schemas"]["BaseSystemReadonlyFields"]
  #   update:
  #     x-speakeasy-param-suppress-computed-diff: true
  # - target: $["components"]["schemas"]["BaseSystemFields"]
  #   update:
  #     x-speakeasy-param-suppress-computed-diff: true
  - target: $["components"]["schemas"]["RolePayload"]["allOf"][0]["properties"]
    update:
      x-speakeasy-type-override: any
